<div id="current-track" class="text-center">
    <div id="track-image" class="d-inline-block position-relative">
        <img class="rounded-3 m-3 mt-5" height="300" width="300" src={{track.album.image}} alt="Cover" *ngIf="track">
        <div class="rounded-circle d-flex justify-content-center align-items-center position-absolute in-queue" *ngIf="track?.isFromQueue">
            <svg role="img" height="16" width="16" aria-hidden="true" viewBox="0 0 16 16" data-encore-id="icon" class="Svg-sc-ytk21e-0 gQUQL">
                <path fill="#b3b3b3" d="M15 15H1v-1.5h14V15zm0-4.5H1V9h14v1.5zm-14-7A2.5 2.5 0 0 1 3.5 1h9a2.5 2.5 0 0 1 0 5h-9A2.5 2.5 0 0 1 1 3.5zm2.5-1a1 1 0 0 0 0 2h9a1 1 0 1 0 0-2h-9z"></path>
            </svg>
        </div>
        <div class="rounded-3 mb-3 mt-5 mx-auto d-flex justify-content-center align-items-center no-track" *ngIf="!track">
            <svg role="img" height="128" width="128" aria-hidden="true" data-testid="card-image-fallback" viewBox="0 0 24 24" data-encore-id="icon" class="Svg-sc-ytk21e-0 gQUQL">
                <path fill="#b3b3b3" d="M6 3h15v15.167a3.5 3.5 0 1 1-3.5-3.5H19V5H8v13.167a3.5 3.5 0 1 1-3.5-3.5H6V3zm0 13.667H4.5a1.5 1.5 0 1 0 1.5 1.5v-1.5zm13 0h-1.5a1.5 1.5 0 1 0 1.5 1.5v-1.5z"></path>
            </svg>
        </div>
    </div>
    <div class="d-flex">
        <div class="left-fade"></div>
            <div id="track-details" class="mx-auto track-details" *ngIf="track">
                <h4 (click)="open(track)" data-bs-toggle="modal" data-bs-target="#exampleModal"><b>{{track.name}}</b></h4>
                <h5><a *ngFor="let artist of track.artists; last as isLast" (click)="open(artist)" data-bs-toggle="modal" data-bs-target="#exampleModal">{{artist?.name}}{{!isLast ? ", " : ""}}</a></h5>
                <h6 (click)="open(track.album)" data-bs-toggle="modal" data-bs-target="#exampleModal">{{track.album.name}}</h6>
            </div>
            <div id="track-details" class="mx-auto track-details" *ngIf="!track">
              <h4><b>Nessuna canzone rilevata</b></h4>
              <h5>Metti un po' di musica su Spotify</h5>
          </div>
        <div class="right-fade"></div>
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-body rounded">
                    <div class="my-header">
                      <h5>{{item?.name}}</h5>
                      <p>{{ itemType === 0 ? "Album" : itemType === 1 ? "Artista" : "Canzone"}}</p>
                    </div>
                    <div class="d-flex">
                      <div class="my-half" data-bs-dismiss="modal" (click)="openSpotify()">
                        Apri con
                        <br>
                        Spotify
                      </div>
                      <span class="vr"></span>
                      <div class="my-half" data-bs-dismiss="modal" (click)="addToWatchlist()">
                        Aggiungi alla
                        <br>
                        Watchlist
                      </div>
                    </div>
                      </div>
              </div>
            </div>
        </div>
    </div>
    <div id="buttons" class="d-flex justify-content-evenly mt-3" *ngIf="track">
        <button class="btn rounded-pill my-btn" *ngIf="track?.isFromQueue" (click)="removeFromQueue()">Rimuovi da<br><b>{{queue?.name}}</b></button>
        <button class="btn rounded-pill my-btn" *ngIf="!track?.isFromQueue"(click)="addToQueue()">Aggiungi a<br><b>{{queue?.name}}</b></button>
        <button class="btn rounded-pill my-btn" (click)="addToPlaylist()">Aggiungi a<br><b>{{playlist?.name}}</b></button>
    </div>
    <div class="d-flex justify-content-center position-fixed mb-4 bottom-0 my-footer">
      <div #myToast class="toast rounded-pill hide" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="true" data-bs-delay="2000">
        <div class="toast-body rounded-pill my-toast">
          {{toastMessage}}
        </div>
      </div>
    </div>
</div>
