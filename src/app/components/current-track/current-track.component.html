<div class="pt-5 mb-3 me-5 ms-auto watchlist" (click)="goToWatchlist()">
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50px" height="38px" viewBox="0 0 50 38" version="1.1" fill="#cdcdcd">
    <g id="surface1">
    <path d="M 32.75 0.0507812 C 30.503906 0.410156 28.488281 1.933594 27.648438 3.910156 C 27.25 4.84375 27.148438 5.640625 27.144531 7.808594 L 27.144531 9.007812 L 22.867188 9.007812 L 22.84375 7.136719 C 22.816406 4.988281 22.789062 4.828125 22.347656 3.878906 C 21.511719 2.085938 20.066406 0.816406 18.261719 0.289062 C 17.578125 0.09375 17.066406 0.0351562 16.230469 0.0664062 C 14.601562 0.128906 13.503906 0.613281 12.253906 1.828125 C 11.363281 2.6875 10.90625 3.375 10.453125 4.554688 C 10.164062 5.316406 9.964844 5.515625 9.03125 5.996094 C 7.921875 6.5625 7.234375 7.066406 6.421875 7.910156 C 5.34375 9.03125 5.117188 9.433594 4.210938 11.863281 C 2.554688 16.277344 0.421875 23.039062 0.117188 24.832031 C -0.0195312 25.648438 -0.00390625 27.363281 0.148438 28.222656 C 0.585938 30.707031 1.710938 32.828125 3.554688 34.632812 C 5.917969 36.960938 9.082031 38.175781 12.152344 37.9375 C 14.945312 37.722656 17.535156 36.496094 19.597656 34.429688 C 20.335938 33.683594 20.753906 33.152344 21.453125 32.066406 C 21.722656 31.640625 21.96875 31.289062 21.988281 31.289062 C 22.011719 31.289062 22.246094 31.402344 22.503906 31.546875 C 23.167969 31.898438 23.648438 32.007812 24.671875 32.046875 C 26.011719 32.097656 26.78125 31.953125 27.585938 31.515625 C 27.8125 31.390625 28.019531 31.289062 28.046875 31.289062 C 28.066406 31.289062 28.289062 31.617188 28.539062 32.023438 C 29.195312 33.070312 29.632812 33.652344 30.277344 34.316406 C 31.835938 35.925781 33.75 37.054688 35.855469 37.59375 C 39.269531 38.464844 42.734375 37.71875 45.515625 35.507812 C 46.050781 35.085938 47.070312 34.0625 47.488281 33.53125 C 48.738281 31.957031 49.511719 30.265625 49.855469 28.355469 C 49.945312 27.871094 49.964844 27.554688 49.964844 26.632812 C 49.96875 25.546875 49.964844 25.46875 49.804688 24.753906 C 49.003906 21.121094 46.152344 12.25 44.996094 9.792969 C 44.632812 9.019531 43.765625 7.960938 42.902344 7.230469 C 42.300781 6.722656 41.8125 6.390625 41 5.960938 C 40.003906 5.417969 39.878906 5.285156 39.535156 4.425781 C 39.105469 3.324219 38.722656 2.71875 38.003906 2 C 37.082031 1.082031 35.828125 0.390625 34.582031 0.128906 C 34.128906 0.03125 33.136719 -0.0117188 32.75 0.0507812 Z M 13.011719 18.726562 C 13.699219 18.84375 14.335938 19.042969 14.769531 19.257812 C 16.132812 19.945312 17.578125 21.347656 18.332031 22.707031 C 19.515625 24.839844 19.503906 27.667969 18.304688 30.078125 C 17.539062 31.617188 16.488281 32.648438 14.898438 33.417969 C 12.269531 34.691406 9.601562 34.515625 7.21875 32.914062 C 5.164062 31.53125 3.894531 29.347656 3.730469 26.929688 C 3.636719 25.515625 3.878906 24.207031 4.460938 22.984375 C 5.53125 20.734375 7.894531 18.953125 10.230469 18.632812 C 10.796875 18.558594 12.332031 18.609375 13.011719 18.726562 Z M 39.832031 18.660156 C 40.550781 18.769531 41.148438 18.949219 41.777344 19.246094 C 44.097656 20.363281 45.734375 22.457031 46.195312 24.90625 C 46.433594 26.183594 46.304688 27.9375 45.886719 29.066406 C 45.214844 30.863281 43.230469 32.941406 41.46875 33.6875 C 39.902344 34.355469 37.628906 34.402344 35.933594 33.804688 C 33.050781 32.785156 31.019531 29.957031 30.785156 26.632812 C 30.71875 25.691406 30.917969 24.527344 31.328125 23.507812 C 32.054688 21.664062 33.6875 19.957031 35.40625 19.222656 C 36.011719 18.96875 36.929688 18.710938 37.503906 18.640625 C 38.117188 18.5625 39.25 18.574219 39.832031 18.660156 Z M 25.355469 24.367188 C 26.285156 24.613281 26.851562 25.214844 27 26.105469 C 27.136719 26.960938 26.632812 27.914062 25.886719 28.203125 C 25.46875 28.359375 24.8125 28.398438 24.40625 28.277344 C 23.386719 27.984375 22.769531 26.914062 23.03125 25.886719 C 23.183594 25.292969 23.53125 24.878906 24.132812 24.574219 C 24.695312 24.285156 24.914062 24.25 25.355469 24.367188 Z M 25.355469 24.367188 "/>
    <path d="M 10.804688 20.492188 C 10.367188 20.535156 9.527344 20.796875 9.019531 21.054688 C 7.085938 22.027344 5.8125 23.867188 5.683594 25.886719 C 5.628906 26.730469 5.785156 27.347656 6.148438 27.703125 C 6.699219 28.242188 7.898438 28.253906 8.566406 27.722656 C 9.019531 27.363281 9.214844 26.957031 9.289062 26.21875 C 9.347656 25.660156 9.511719 25.289062 9.847656 24.960938 C 10.164062 24.644531 10.554688 24.449219 11.363281 24.1875 C 12.335938 23.878906 12.914062 23.457031 13.171875 22.863281 C 13.3125 22.550781 13.289062 21.949219 13.128906 21.613281 C 12.6875 20.71875 11.984375 20.378906 10.804688 20.492188 Z M 10.804688 20.492188 "/>
    <path d="M 37.605469 20.558594 C 36.210938 20.878906 35.464844 21.257812 34.597656 22.097656 C 33.585938 23.082031 33.0625 24.074219 32.75 25.585938 C 32.621094 26.210938 32.644531 26.597656 32.828125 26.988281 C 32.988281 27.351562 33.335938 27.765625 33.59375 27.917969 C 34.015625 28.171875 34.945312 28.179688 35.429688 27.945312 C 35.886719 27.722656 36.136719 27.300781 36.351562 26.378906 C 36.519531 25.667969 36.683594 25.328125 37.0625 24.921875 C 37.433594 24.515625 37.886719 24.285156 38.59375 24.128906 C 39.566406 23.925781 40.011719 23.605469 40.199219 22.976562 C 40.328125 22.5625 40.335938 22.035156 40.222656 21.695312 C 40.101562 21.339844 39.648438 20.890625 39.199219 20.675781 C 38.902344 20.535156 38.785156 20.507812 38.394531 20.496094 C 38.128906 20.492188 37.796875 20.519531 37.605469 20.558594 Z M 37.605469 20.558594 "/>
    </g>
  </svg>
</div>
<div id="current-track" class="text-center">
    <div id="track-image" class="d-inline-block position-relative">
        <img class="rounded-3 m-3 mt-5" height="300" width="300" src={{track.album.image}} alt="Cover" *ngIf="track">
        <div class="rounded-circle d-flex justify-content-center align-items-center position-absolute in-queue" *ngIf="track?.isFromQueue">
            <svg role="img" height="16" width="16" aria-hidden="true" viewBox="0 0 16 16" data-encore-id="icon" class="Svg-sc-ytk21e-0 gQUQL">
                <path fill="#b3b3b3" d="M15 15H1v-1.5h14V15zm0-4.5H1V9h14v1.5zm-14-7A2.5 2.5 0 0 1 3.5 1h9a2.5 2.5 0 0 1 0 5h-9A2.5 2.5 0 0 1 1 3.5zm2.5-1a1 1 0 0 0 0 2h9a1 1 0 1 0 0-2h-9z"></path>
            </svg>
        </div>
        <div class="rounded-3 m-3 mt-5 mx-auto d-flex justify-content-center align-items-center no-track" *ngIf="!track">
            <svg role="img" height="128" width="128" aria-hidden="true" data-testid="card-image-fallback" viewBox="0 0 24 24" data-encore-id="icon" class="Svg-sc-ytk21e-0 gQUQL">
                <path fill="#b3b3b3" d="M6 3h15v15.167a3.5 3.5 0 1 1-3.5-3.5H19V5H8v13.167a3.5 3.5 0 1 1-3.5-3.5H6V3zm0 13.667H4.5a1.5 1.5 0 1 0 1.5 1.5v-1.5zm13 0h-1.5a1.5 1.5 0 1 0 1.5 1.5v-1.5z"></path>
            </svg>
        </div>
    </div>
    <div class="d-flex mt-2">
        <div class="left-fade"></div>
            <div id="track-details" class="mx-auto track-details" *ngIf="track">
                <h4 (click)="open(track)" data-bs-toggle="modal" data-bs-target="#exampleModal"><b>{{track.name}}</b></h4>
                <h5><a *ngFor="let artist of track.artists; last as isLast" (click)="open(artist)" data-bs-toggle="modal" data-bs-target="#exampleModal">{{artist?.name}}{{!isLast ? ", " : ""}}</a></h5>
                <h6 (click)="open(track.album)" data-bs-toggle="modal" data-bs-target="#exampleModal">{{track.album.name}}</h6>
            </div>
            <div id="track-details" class="mx-auto track-details" *ngIf="!track">
              <h4><b>Nessuna canzone rilevata</b></h4>
              <h5>Metti un po' di musica su Spotify</h5>
          </div>
        <div class="right-fade"></div>
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-body rounded">
                    <div class="my-header">
                      <h5>{{item?.name}}</h5>
                      <p>{{ itemType === 0 ? "Album" : itemType === 1 ? "Artista" : "Canzone"}}</p>
                    </div>
                    <div class="d-flex">
                      <div class="my-half" data-bs-dismiss="modal" (click)="openSpotify()">
                        Apri con
                        <br>
                        Spotify
                      </div>
                      <span class="vr"></span>
                      <div class="my-half" data-bs-dismiss="modal" (click)="addToWatchlist()">
                        Aggiungi alla
                        <br>
                        Watchlist
                      </div>
                    </div>
                      </div>
              </div>
            </div>
        </div>
    </div>
    <div id="buttons" class="d-flex justify-content-evenly mt-3" *ngIf="track">
        <button class="btn rounded-pill my-btn" *ngIf="track?.isFromQueue" (click)="removeFromQueue()">Rimuovi da<br><b>Queue - PM</b></button>
        <button class="btn rounded-pill my-btn" *ngIf="!track?.isFromQueue" (click)="addToPlaylist(true)">Aggiungi a<br><b>Queue - PM</b></button>
        <button class="btn rounded-pill my-btn" (click)="addToPlaylist(false)">Aggiungi a<br><b>{{playlist?.name}}</b></button>
        <div class="modal fade" #checkModal tabindex="-1" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-body rounded">
                  <div class="my-header">
                    <h5>{{playlistToCheck!.name}} {{perfectMatch ? 'contiene' : 'potrebbe contenere'}} gi√† questa traccia</h5>
                    <p>Trovata una corrispondenza {{perfectMatch ? 'perfetta' : 'di artista e titolo'}}</p>
                  </div>
                  <div class="d-flex">
                    <div class="my-half" data-bs-dismiss="modal">
                      Annulla
                    </div>
                    <span class="vr"></span>
                    <div class="my-half" data-bs-dismiss="modal" (click)="finalizeAdd()">
                      Aggiungi
                      <br>
                      comunque
                    </div>
                  </div>
                    </div>
            </div>
          </div>
      </div>
    </div>
    <div class="d-flex justify-content-center position-fixed mb-4 bottom-0 my-footer">
      <div #myToast class="toast rounded-pill hide" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="true" data-bs-delay="2000">
        <div class="toast-body rounded-pill my-toast">
          {{toastMessage}}
        </div>
      </div>
    </div>
</div>
